<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¢³æ’æ”¾è¯æ±‡è¯äº‘ - é’å°‘å¹´ç§‘æ™®æ•™è‚²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #e8f4f8 0%, #f0f7fa 50%, #e8f4f8 100%);
            overflow: hidden;
            min-height: 100vh;
        }
        
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        #word-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2;
        }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 25px 60px;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none;
        }
        
        .logo {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(90deg, #1a73e8, #34a853, #1a73e8);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradientFlow 4s ease infinite;
            text-shadow: 0 0 20px rgba(26, 115, 232, 0.3);
        }
        
        @keyframes gradientFlow {
            0%, 100% { background-position: 0% center; }
            50% { background-position: 200% center; }
        }
        
        .controls {
            display: flex;
            gap: 20px;
            pointer-events: auto;
        }
        
        .control-btn {
            background: #1a73e8;
            color: white;
            padding: 12px 28px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(26, 115, 232, 0.3);
        }
        
        .control-btn:hover {
            background: #1557b0;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(26, 115, 232, 0.4);
        }
        
        .info-panel {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px 50px;
            z-index: 10;
            text-align: center;
            max-width: 700px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            animation: slideUp 1s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        
        .info-panel h2 {
            color: #1a73e8;
            font-size: 1.4rem;
            margin-bottom: 12px;
        }
        
        .info-panel p {
            color: #5f6368;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e8f4f8 0%, #f0f7fa 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }
        
        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-spinner {
            width: 70px;
            height: 70px;
            border: 4px solid rgba(26, 115, 232, 0.2);
            border-top-color: #1a73e8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: #1a73e8;
            margin-top: 25px;
            font-size: 1.2rem;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .word-tooltip {
            position: fixed;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 12px;
            padding: 18px 25px;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 320px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }
        
        .word-tooltip.visible {
            opacity: 1;
        }
        
        .word-tooltip .cn {
            color: #1a73e8;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .word-tooltip .en {
            color: #5f6368;
            font-size: 1rem;
            margin-bottom: 12px;
        }
        
        .word-tooltip .link {
            color: #34a853;
            font-size: 0.9rem;
            text-decoration: none;
            font-weight: 500;
        }
        
        .stats {
            position: fixed;
            top: 100px;
            right: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px 25px;
            z-index: 10;
            color: #333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stats-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
            font-size: 0.95rem;
        }
        
        .stats-label {
            color: #5f6368;
            margin-right: 20px;
        }
        
        .stats-value {
            color: #1a73e8;
            font-weight: 600;
        }
        
        .footer {
            position: fixed;
            bottom: 15px;
            right: 30px;
            color: #9aa0a6;
            font-size: 0.85rem;
            z-index: 10;
        }
        
        .home-link {
            position: fixed;
            bottom: 15px;
            left: 30px;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: #1a73e8;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .home-link:hover {
            color: #1557b0;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .home-link img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        @media (max-width: 1200px) {
            .header {
                padding: 20px 40px;
            }
            
            .logo {
                font-size: 1.8rem;
            }
            
            .control-btn {
                padding: 10px 22px;
                font-size: 0.9rem;
            }
            
            .info-panel {
                max-width: 600px;
                padding: 20px 35px;
            }
            
            .home-link {
                left: 15px;
                bottom: 10px;
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .home-link img {
                width: 20px;
                height: 20px;
            }
            
            .footer {
                right: 15px;
                bottom: 10px;
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">æ­£åœ¨åŠ è½½ä½ç¢³ç¯ä¿çŸ¥è¯†...</div>
    </div>
    
    <canvas id="particles-canvas"></canvas>
    <canvas id="word-canvas"></canvas>
    
    <div class="header">
        <div class="logo">ğŸŒ ä½ç¢³ç”Ÿæ´» Â· ç»¿è‰²æœªæ¥</div>
        <div class="controls">
            <button class="control-btn" onclick="toggleRotation()">
                ğŸ”„ è‡ªåŠ¨æ—‹è½¬
            </button>
            <button class="control-btn" onclick="changeTheme()">
                ğŸ¨ åˆ‡æ¢ä¸»é¢˜
            </button>
            <button class="control-btn" onclick="zoomOut()" title="ç¼©å°">
                ğŸ”-
            </button>
            <button class="control-btn" onclick="zoomIn()" title="æ”¾å¤§">
                ğŸ”+
            </button>
            <button class="control-btn" onclick="resetView()">
                ğŸ”„ é‡ç½®è§†å›¾
            </button>
        </div>
    </div>
    
    <div class="stats">
        <div class="stats-item">
            <span class="stats-label">è¯æ±‡æ•°é‡</span>
            <span class="stats-value" id="word-count">0</span>
        </div>
        <div class="stats-item">
            <span class="stats-label">å¸§ç‡</span>
            <span class="stats-value" id="fps">60 FPS</span>
        </div>
    </div>
    
    <div class="info-panel">
        <h2>ğŸŒ± ç¢³æ’æ”¾æ ¸å¿ƒè¯æ±‡å­¦ä¹ </h2>
        <p>æ¢ç´¢ç¢³ä¸­å’Œã€æ°”å€™å˜åŒ–ã€ç»¿è‰²èƒ½æºç­‰é‡è¦æ¦‚å¿µã€‚ç‚¹å‡»è¯æ±‡æŸ¥çœ‹è¯¦ç»†è§£é‡Šï¼Œäº†è§£ä½ç¢³ç”Ÿæ´»ä»æˆ‘åšèµ·çš„æ„ä¹‰ã€‚</p>
    </div>
    
    <a href="../index.html" class="home-link">
        <img src="../school.png" alt="æ ¡å¾½">
        å›åˆ°ç½‘ç«™é¦–é¡µ
    </a>
    
    <div class="footer">é’å°‘å¹´ä½ç¢³ç¯ä¿ç§‘æ™®æ•™è‚²è¯äº‘-å¤©æ´¥å¸‚å—å¼€åŒºå—å¼€å°å­¦</div>
    
    <div class="word-tooltip" id="tooltip">
        <div class="cn" id="tooltip-cn"></div>
        <div class="en" id="tooltip-en"></div>
        <a class="link" id="tooltip-link" href="#" target="_blank">ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†è§£é‡Š â†’</a>
    </div>
    
    <script>
        // ç²¾é€‰çš„ä½ç¢³ç¯ä¿æ ¸å¿ƒè¯æ±‡ï¼ˆé€‚åˆé’å°‘å¹´ç†è§£ï¼‰
        const wordData = [
  {
    "cn": "ç¢³ä¸­å’Œ",
    "en": "Carbon Neutrality",
    "link": "carbon_neutrality.html"
  },
  {
    "cn": "ç¢³è¾¾å³°",
    "en": "Carbon Peak",
    "link": "carbon_peak.html"
  },
  {
    "cn": "ç¢³æ’æ”¾",
    "en": "Carbon Emissions",
    "link": "carbon_emissions.html"
  },
  {
    "cn": "æ°”å€™å˜åŒ–",
    "en": "Climate Change",
    "link": "climate_change.html"
  },
  {
    "cn": "å…¨çƒå˜æš–",
    "en": "Global Warming",
    "link": "global_warming.html"
  },
  {
    "cn": "å¯æŒç»­å‘å±•",
    "en": "Sustainable Development",
    "link": "sustainable_development.html"
  },
  {
    "cn": "å¯å†ç”Ÿèƒ½æº",
    "en": "Renewable Energy",
    "link": "renewable_energy.html"
  },
  {
    "cn": "ä½ç¢³ç”Ÿæ´»",
    "en": "Low-carbon Lifestyle",
    "link": "low_carbon_life.html"
  },
  {
    "cn": "åƒåœ¾åˆ†ç±»",
    "en": "Waste Sorting",
    "link": "waste_sorting.html"
  },
  {
    "cn": "æ¸…æ´èƒ½æº",
    "en": "Clean Energy",
    "link": "clean_energy.html"
  },
  {
    "cn": "å¤ªé˜³èƒ½",
    "en": "Solar Energy",
    "link": "solar_energy.html"
  },
  {
    "cn": "å…‰ä¼",
    "en": "Photovoltaic (PV)",
    "link": "photovoltaic.html"
  },
  {
    "cn": "é£èƒ½",
    "en": "Wind Energy",
    "link": "wind_energy.html"
  },
  {
    "cn": "æ°´åŠ›å‘ç”µ",
    "en": "Hydropower",
    "link": "hydropower.html"
  },
  {
    "cn": "æ°¢èƒ½",
    "en": "Hydrogen Energy",
    "link": "hydrogen_energy.html"
  },
  {
    "cn": "ç»¿æ°¢",
    "en": "Green Hydrogen",
    "link": "green_hydrogen.html"
  },
  {
    "cn": "å‚¨èƒ½",
    "en": "Energy Storage",
    "link": "energy_storage.html"
  },
  {
    "cn": "èƒ½æºæ•ˆç‡",
    "en": "Energy Efficiency",
    "link": "energy_efficiency.html"
  },
  {
    "cn": "å»ç¢³åŒ–",
    "en": "Decarbonization",
    "link": "decarbonization.html"
  },
  {
    "cn": "ç»¿è‰²å»ºç­‘",
    "en": "Green Building",
    "link": "green_building.html"
  },
  {
    "cn": "èŠ‚èƒ½å»ºç­‘",
    "en": "Energy-efficient Building",
    "link": "energy_building.html"
  },
  {
    "cn": "ç”µåŠ¨æ±½è½¦",
    "en": "Electric Vehicle (EV)",
    "link": "electric_vehicle.html"
  },
  {
    "cn": "æ–°èƒ½æºæ±½è½¦",
    "en": "New Energy Vehicle (NEV)",
    "link": "new_energy_vehicle.html"
  },
  {
    "cn": "å…¬å…±äº¤é€š",
    "en": "Public Transport",
    "link": "public_transport.html"
  },
  {
    "cn": "ç»¿è‰²å‡ºè¡Œ",
    "en": "Green Travel",
    "link": "green_travel.html"
  },
  {
    "cn": "éª‘è¡Œ",
    "en": "Cycling",
    "link": "cycling.html"
  },
  {
    "cn": "æ­¥è¡Œ",
    "en": "Walking",
    "link": "walking.html"
  },
  {
    "cn": "ä½ç¢³ç”Ÿæ´»",
    "en": "Low-carbon Lifestyle",
    "link": "low_carbon_life.html"
  },
  {
    "cn": "ç»¿è‰²æ¶ˆè´¹",
    "en": "Green Consumption",
    "link": "green_consumption.html"
  },
  {
    "cn": "èŠ‚çº¦ç”¨æ°´",
    "en": "Water Conservation",
    "link": "water_conservation.html"
  },
  {
    "cn": "èŠ‚çº¦ç”¨ç”µ",
    "en": "Save Electricity",
    "link": "save_electricity.html"
  },
  {
    "cn": "å‡å°‘æµªè´¹",
    "en": "Reduce Waste",
    "link": "reduce_waste.html"
  },
  {
    "cn": "å›æ”¶åˆ©ç”¨",
    "en": "Recycling",
    "link": "recycling.html"
  },
  {
    "cn": "æ—§ç‰©åˆ©ç”¨",
    "en": "Reuse",
    "link": "reuse.html"
  },
  {
    "cn": "äºŒæ‰‹äº¤æ˜“",
    "en": "Second-hand Trading",
    "link": "secondhand_trading.html"
  },
  {
    "cn": "å‡å°‘ä¸€æ¬¡æ€§ç”¨å“",
    "en": "Reduce Single-use Items",
    "link": "reduce_single_use.html"
  },
  {
    "cn": "ç»¿è‰²åŒ…è£…",
    "en": "Green Packaging",
    "link": "green_packaging.html"
  },
  {
    "cn": "æ¤ç‰©åŸºé¥®é£Ÿ",
    "en": "Plant-based Diet",
    "link": "plant_based_diet.html"
  },
  {
    "cn": "å‡å°‘é£Ÿç‰©æµªè´¹",
    "en": "Fight Food Waste",
    "link": "food_waste.html"
  },
  {
    "cn": "æœ¬åœ°é£Ÿç‰©",
    "en": "Local Food",
    "link": "local_food.html"
  },
  {
    "cn": "æ¤æ ‘é€ æ—",
    "en": "Afforestation",
    "link": "afforestation.html"
  },
  {
    "cn": "æ£®æ—ä¿æŠ¤",
    "en": "Forest Conservation",
    "link": "forest_conservation.html"
  },
  {
    "cn": "æµ·æ´‹ä¿æŠ¤",
    "en": "Ocean Conservation",
    "link": "ocean_conservation.html"
  },
  {
    "cn": "æ¹¿åœ°ä¿æŠ¤",
    "en": "Wetland Conservation",
    "link": "wetland_conservation.html"
  },
  {
    "cn": "ç”Ÿç‰©å¤šæ ·æ€§",
    "en": "Biodiversity",
    "link": "biodiversity.html"
  },
  {
    "cn": "ç”Ÿæ€ä¿®å¤",
    "en": "Ecological Restoration",
    "link": "ecological_restoration.html"
  },
  {
    "cn": "ç»¿è‰²åŸå¸‚",
    "en": "Green City",
    "link": "green_city.html"
  },
  {
    "cn": "ä½ç¢³ç¤¾åŒº",
    "en": "Low-carbon Community",
    "link": "low_carbon_community.html"
  },
  {
    "cn": "æµ·ç»µåŸå¸‚",
    "en": "Sponge City",
    "link": "sponge_city.html"
  },
  {
    "cn": "å¾ªç¯ç»æµ",
    "en": "Circular Economy",
    "link": "circular_economy.html"
  },
  {
    "cn": "é›¶åºŸå¼ƒ",
    "en": "Zero Waste",
    "link": "zero_waste.html"
  },
  {
    "cn": "ç»¿è‰²åˆ¶é€ ",
    "en": "Green Manufacturing",
    "link": "green_manufacturing.html"
  },
  {
    "cn": "æ™ºèƒ½ç”µç½‘",
    "en": "Smart Grid",
    "link": "smart_grid.html"
  },
  {
    "cn": "æ°”å€™è¡ŒåŠ¨",
    "en": "Climate Action",
    "link": "climate_action.html"
  },
  {
    "cn": "ç¯ä¿æ„è¯†",
    "en": "Environmental Awareness",
    "link": "environmental_awareness.html"
  },
  {
    "cn": "ç»¿è‰²åˆ›æ–°",
    "en": "Green Innovation",
    "link": "green_innovation.html"
  },
  {
    "cn": "é’å¹´ç¯ä¿",
    "en": "Youth Environmental Action",
    "link": "youth_environment.html"
  }
];
        
        // å…¨å±€å˜é‡
        const wordCanvas = document.getElementById('word-canvas');
        const particlesCanvas = document.getElementById('particles-canvas');
        const wordCtx = wordCanvas.getContext('2d');
        const particlesCtx = particlesCanvas.getContext('2d');
        const tooltip = document.getElementById('tooltip');
        
        let width, height;
        let words = [];
        let particles = [];
        let animationId;
        let autoRotate = true;
        let rotationAngle = 0;
        let mouseX = 0, mouseY = 0;
        let isDragging = false;
        let lastMouseX = 0, lastMouseY = 0;
        let scale = 1;
        let offsetX = 0, offsetY = 0;
        let currentTheme = 0;
        let lastTime = 0;
        let frameCount = 0;
        let fps = 60;
        
        // ä¸»é¢˜é…ç½® - æµ…è‰²ä¸»é¢˜
        const themes = [
            { primary: '#1a73e8', secondary: '#34a853', text: '#333' },
            { primary: '#00bcd4', secondary: '#4caf50', text: '#333' },
            { primary: '#ff9800', secondary: '#e91e63', text: '#333' },
            { primary: '#9c27b0', secondary: '#2196f3', text: '#333' }
        ];
        
        // åˆå§‹åŒ–
        function init() {
            resize();
            createParticles();
            createWords();
            setupEventListeners();
            updateStats();
            hideLoading();
            animate(0);
        }
        
        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            wordCanvas.width = width;
            wordCanvas.height = height;
            particlesCanvas.width = width;
            particlesCanvas.height = height;
        }
        
        function createParticles() {
            particles = [];
            for (let i = 0; i < 200; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: Math.random() * 4 + 2,
                    speedX: (Math.random() - 0.5) * 0.3,
                    speedY: (Math.random() - 0.5) * 0.3,
                    opacity: Math.random() * 0.4 + 0.2
                });
            }
        }
        
        function createWords() {
            words = wordData.map((item, index) => {
                const angle = (index / wordData.length) * Math.PI * 2;
                const radius = Math.random() * 250 + 100;
                return {
                    ...item,
                    x: Math.cos(angle) * radius,
                    y: Math.sin(angle) * radius,
                    z: Math.random() * 2 - 1,
                    size: Math.random() * 28 + 16,
                    angle: angle,
                    radius: radius,
                    rotation: Math.random() * 360,
                    speed: (Math.random() - 0.5) * 0.2,
                    baseOpacity: Math.random() * 0.5 + 0.5,
                    pulse: Math.random() * Math.PI * 2,
                    hoverScale: 1
                };
            });
            document.getElementById('word-count').textContent = words.length;
        }
        
        function setupEventListeners() {
            window.addEventListener('resize', () => {
                resize();
                createParticles();
                createWords();
            });
            
            wordCanvas.addEventListener('mousemove', handleMouseMove);
            wordCanvas.addEventListener('mousedown', handleMouseDown);
            wordCanvas.addEventListener('mouseup', handleMouseUp);
            wordCanvas.addEventListener('wheel', handleWheel);
            wordCanvas.addEventListener('click', handleClick);
        }
        
        function handleMouseMove(e) {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            if (isDragging) {
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                offsetX += deltaX * 0.5;
                offsetY += deltaY * 0.5;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
            }
            
            checkWordHover();
        }
        
        function handleMouseDown(e) {
            isDragging = true;
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
        }
        
        function handleMouseUp() {
            isDragging = false;
        }
        
        function handleWheel(e) {
            e.preventDefault();
            scale += e.deltaY * -0.001;
            scale = Math.max(0.5, Math.min(3, scale));
        }
        
        function handleClick(e) {
            const word = findClickedWord(e.clientX, e.clientY);
            if (word) {
                window.location.href = word.link;
            }
        }
        
        function findClickedWord(mouseX, mouseY) {
            const centerX = width / 2 + offsetX;
            const centerY = height / 2 + offsetY;
            
            for (let word of words) {
                const x = centerX + (word.x * Math.cos(rotationAngle) - word.y * Math.sin(rotationAngle)) * scale;
                const y = centerY + (word.x * Math.sin(rotationAngle) + word.y * Math.cos(rotationAngle)) * scale;
                
                const measure = wordCtx.measureText(word.cn);
                const wordWidth = measure.width * word.hoverScale;
                const wordHeight = word.size * word.hoverScale;
                
                if (mouseX >= x - wordWidth / 2 && mouseX <= x + wordWidth / 2 &&
                    mouseY >= y - wordHeight / 2 && mouseY <= y + wordHeight / 2) {
                    return word;
                }
            }
            return null;
        }
        
        function checkWordHover() {
            const word = findClickedWord(mouseX, mouseY);
            if (word) {
                document.getElementById('tooltip-cn').textContent = word.cn;
                document.getElementById('tooltip-en').textContent = word.en;
                document.getElementById('tooltip-link').href = word.link;
                
                tooltip.style.left = mouseX + 20 + 'px';
                tooltip.style.top = mouseY + 20 + 'px';
                tooltip.classList.add('visible');
                
                word.hoverScale = 1.15;
            } else {
                tooltip.classList.remove('visible');
                words.forEach(w => w.hoverScale = 1);
            }
        }
        
        function updateParticles() {
            particlesCtx.clearRect(0, 0, width, height);
            
            particles.forEach(p => {
                p.x += p.speedX;
                p.y += p.speedY;
                
                if (p.x < 0) p.x = width;
                if (p.x > width) p.x = 0;
                if (p.y < 0) p.y = height;
                if (p.y > height) p.y = 0;
                
                const theme = themes[currentTheme];
                particlesCtx.beginPath();
                particlesCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                particlesCtx.fillStyle = theme.primary;
                particlesCtx.globalAlpha = p.opacity;
                particlesCtx.fill();
                particlesCtx.globalAlpha = 1;
            });
        }
        
        function updateWords(time) {
            wordCtx.clearRect(0, 0, width, height);
            
            const centerX = width / 2 + offsetX;
            const centerY = height / 2 + offsetY;
            const theme = themes[currentTheme];
            
            words.forEach(word => {
                if (autoRotate) {
                    word.angle += word.speed * 0.01;
                }
                
                word.pulse += 0.04;
                const pulseScale = 1 + Math.sin(word.pulse) * 0.03;
                const currentScale = word.hoverScale * pulseScale;
                
                const x = centerX + (word.x * Math.cos(rotationAngle) - word.y * Math.sin(rotationAngle)) * scale;
                const y = centerY + (word.x * Math.sin(rotationAngle) + word.y * Math.cos(rotationAngle)) * scale;
                
                const rotatedX = word.x * Math.cos(rotationAngle) - word.y * Math.sin(rotationAngle);
                const rotatedY = word.x * Math.sin(rotationAngle) + word.y * Math.cos(rotationAngle);
                const z = Math.sin(rotatedX * 0.015 + time * 0.0008) * 0.5 + 0.5;
                
                const baseOpacity = word.baseOpacity * (0.6 + z * 0.4);
                
                const gradient = wordCtx.createLinearGradient(
                    x - word.size * 1.5, y,
                    x + word.size * 1.5, y
                );
                gradient.addColorStop(0, theme.primary);
                gradient.addColorStop(1, theme.secondary);
                
                wordCtx.font = `bold ${word.size * currentScale * (0.85 + z * 0.3)}px "Microsoft YaHei", sans-serif`;
                wordCtx.textAlign = 'center';
                wordCtx.textBaseline = 'middle';
                
                wordCtx.shadowColor = theme.primary;
                wordCtx.shadowBlur = 15 * z + 8;
                wordCtx.fillStyle = gradient;
                wordCtx.globalAlpha = baseOpacity;
                wordCtx.fillText(word.cn, x, y);
                wordCtx.globalAlpha = 1;
                wordCtx.shadowBlur = 0;
            });
        }
        
        function animate(time) {
            frameCount++;
            if (time - lastTime >= 1000) {
                fps = frameCount;
                frameCount = 0;
                lastTime = time;
                document.getElementById('fps').textContent = fps + ' FPS';
            }
            
            if (autoRotate) {
                rotationAngle += 0.0015;
            }
            
            updateParticles();
            updateWords(time);
            
            animationId = requestAnimationFrame(animate);
        }
        
        function updateStats() {
            document.getElementById('word-count').textContent = words.length;
        }
        
        function hideLoading() {
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
            }, 800);
        }
        
        function toggleRotation() {
            autoRotate = !autoRotate;
        }
        
        function changeTheme() {
            currentTheme = (currentTheme + 1) % themes.length;
        }
        
        function zoomIn() {
            scale = Math.min(scale * 1.2, 3);
            autoRotate = false;
        }
        
        function zoomOut() {
            scale = Math.max(scale / 1.2, 0.3);
            autoRotate = false;
        }
        
        function resetView() {
            scale = 1;
            offsetX = 0;
            offsetY = 0;
            rotationAngle = 0;
            autoRotate = true;
        }
        
        // å¯åŠ¨
        window.addEventListener('load', init);
    </script>
</body>
</html>